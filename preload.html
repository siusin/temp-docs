<!DOCTYPE html>
<html lang="en" dir="ltr" typeof="bibo:Document " prefix="bibo: http://purl.org/ontology/bibo/ w3p: http://www.w3.org/2001/02pd/rec54#">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta lang="" property="dc:language" content="en">
    <style>
        /*

github.com style (c) Vasily Polovnyov <vast@whiteants.net>

*/

        .hljs {
            display: block;
            overflow-x: auto;
            padding: 0.5em;
            color: #333;
            background: #f8f8f8;
        }

        .hljs-comment,
        .hljs-quote {
            color: #998;
            font-style: italic;
        }

        .hljs-keyword,
        .hljs-selector-tag,
        .hljs-subst {
            color: #333;
            font-weight: bold;
        }

        .hljs-number,
        .hljs-literal,
        .hljs-variable,
        .hljs-template-variable,
        .hljs-tag .hljs-attr {
            color: #008080;
        }

        .hljs-string,
        .hljs-doctag {
            color: #d14;
        }

        .hljs-title,
        .hljs-section,
        .hljs-selector-id {
            color: #900;
            font-weight: bold;
        }

        .hljs-subst {
            font-weight: normal;
        }

        .hljs-type,
        .hljs-class .hljs-title {
            color: #458;
            font-weight: bold;
        }

        .hljs-tag,
        .hljs-name,
        .hljs-attribute {
            color: #000080;
            font-weight: normal;
        }

        .hljs-regexp,
        .hljs-link {
            color: #009926;
        }

        .hljs-symbol,
        .hljs-bullet {
            color: #990073;
        }

        .hljs-built_in,
        .hljs-builtin-name {
            color: #0086b3;
        }

        .hljs-meta {
            color: #999;
            font-weight: bold;
        }

        .hljs-deletion {
            background: #fdd;
        }

        .hljs-addition {
            background: #dfd;
        }

        .hljs-emphasis {
            font-style: italic;
        }

        .hljs-strong {
            font-weight: bold;
        }
    </style>
    <style>
        /* --- EXAMPLES --- */

        div.example-title {
            min-width: 7.5em;
            color: #b9ab2d;
        }

        div.example-title span {
            text-transform: uppercase;
        }

        aside.example,
        div.example,
        div.illegal-example {
            padding: 0.5em;
            margin: 1em 0;
            position: relative;
            clear: both;
        }

        div.illegal-example {
            color: red
        }

        div.illegal-example p {
            color: black
        }

        aside.example,
        div.example {
            padding: .5em;
            border-left-width: .5em;
            border-left-style: solid;
            border-color: #e0cb52;
            background: #fcfaee;
        }

        aside.example div.example {
            border-left-width: .1em;
            border-color: #999;
            background: #fff;
        }

        aside.example div.example div.example-title {
            color: #999;
        }
    </style>
    <style>
        /* --- ISSUES/NOTES --- */

        div.issue-title,
        div.note-title,
        div.ednote-title,
        div.warning-title {
            padding-right: 1em;
            min-width: 7.5em;
            color: #b9ab2d;
        }

        div.issue-title {
            color: #e05252;
        }

        div.note-title,
        div.ednote-title {
            color: #2b2;
        }

        div.warning-title {
            color: #f22;
        }

        div.issue-title span,
        div.note-title span,
        div.ednote-title span,
        div.warning-title span {
            text-transform: uppercase;
        }

        div.note,
        div.issue,
        div.ednote,
        div.warning {
            margin-top: 1em;
            margin-bottom: 1em;
        }

        .note>p:first-child,
        .ednote>p:first-child,
        .issue>p:first-child,
        .warning>p:first-child {
            margin-top: 0
        }

        .issue,
        .note,
        .ednote,
        .warning {
            padding: .5em;
            border-left-width: .5em;
            border-left-style: solid;
        }

        div.issue,
        div.note,
        div.ednote,
        div.warning {
            padding: 1em 1.2em 0.5em;
            margin: 1em 0;
            position: relative;
            clear: both;
        }

        span.note,
        span.ednote,
        span.issue,
        span.warning {
            padding: .1em .5em .15em;
        }

        .issue {
            border-color: #e05252;
            background: #fbe9e9;
        }

        .note,
        .ednote {
            border-color: #52e052;
            background: #e9fbe9;
        }

        .warning {
            border-color: #f11;
            border-width: .2em;
            border-style: solid;
            background: #fbe9e9;
        }

        .warning-title:before {
            content: "⚠";
            /*U+26A0 WARNING SIGN*/
            font-size: 3em;
            float: left;
            height: 100%;
            padding-right: .3em;
            vertical-align: top;
            margin-top: -0.5em;
        }

        li.task-list-item {
            list-style: none;
        }

        input.task-list-item-checkbox {
            margin: 0 0.35em 0.25em -1.6em;
            vertical-align: middle;
        }
    </style>
    <title>Preload</title>



    <style id="respec-mainstyle">
        /*****************************************************************
 * ReSpec 3 CSS
 * Robin Berjon - http://berjon.com/
 *****************************************************************/
        /* Override code highlighter background */

        .hljs {
            background: transparent !important;
        }
        /* --- INLINES --- */

        em.rfc2119 {
            text-transform: lowercase;
            font-style: normal;
            color: #900;
        }

        h1 abbr,
        h2 abbr,
        h3 abbr,
        h4 abbr,
        h5 abbr,
        h6 abbr,
        a abbr {
            border: none;
        }

        dfn {
            font-weight: bold;
        }

        a.internalDFN {
            color: inherit;
            border-bottom: 1px solid #99c;
            text-decoration: none;
        }

        a.externalDFN {
            color: inherit;
            border-bottom: 1px dotted #ccc;
            text-decoration: none;
        }

        a.bibref {
            text-decoration: none;
        }

        cite .bibref {
            font-style: normal;
        }

        code {
            color: #C83500;
        }

        th code {
            color: inherit;
        }
        /* --- TOC --- */

        .toc a,
        .tof a {
            text-decoration: none;
        }

        a .secno,
        a .figno {
            color: #000;
        }

        ul.tof,
        ol.tof {
            list-style: none outside none;
        }

        .caption {
            margin-top: 0.5em;
            font-style: italic;
        }
        /* --- TABLE --- */

        table.simple {
            border-spacing: 0;
            border-collapse: collapse;
            border-bottom: 3px solid #005a9c;
        }

        .simple th {
            background: #005a9c;
            color: #fff;
            padding: 3px 5px;
            text-align: left;
        }

        .simple th[scope="row"] {
            background: inherit;
            color: inherit;
            border-top: 1px solid #ddd;
        }

        .simple td {
            padding: 3px 10px;
            border-top: 1px solid #ddd;
        }

        .simple tr:nth-child(even) {
            background: #f0f6ff;
        }
        /* --- DL --- */

        .section dd>p:first-child {
            margin-top: 0;
        }

        .section dd>p:last-child {
            margin-bottom: 0;
        }

        .section dd {
            margin-bottom: 1em;
        }

        .section dl.attrs dd,
        .section dl.eldef dd {
            margin-bottom: 0;
        }

        #issue-summary>ul,
        .respec-dfn-list {
            column-count: 2;
        }

        #issue-summary li,
        .respec-dfn-list li {
            list-style: none;
        }

        @media print {
            .removeOnSave {
                display: none;
            }
        }
    </style>
    <link rel="stylesheet" href="https://www.w3.org/StyleSheets/TR/2016/W3C-ED">
    <link rel="canonical" href="https://www.w3.org/TR/preload/">
    <meta name="generator" content="ReSpec 15.0.2">
    <script id="initialUserConfig" type="application/json">
        {
            "shortName": "preload",
            "specStatus": "ED",
            "useExperimentalStyles": true,
            "edDraftURI": "https://w3c.github.io/preload/",
            "editors": [{
                    "name": "Ilya Grigorik",
                    "url": "https://www.igvita.com/",
                    "mailto": "igrigorik@gmail.com",
                    "company": "Google",
                    "companyURL": "https://google.com/",
                    "w3cid": "56102"
                },
                {
                    "name": "Yoav Weiss",
                    "url": "https://blog.yoav.ws/",
                    "mailto": "yoav@yoav.ws",
                    "company": "Akamai",
                    "companyURL": "https://akamai.com/",
                    "w3cid": "58673"
                }
            ],
            "wg": "Web Performance Working Group",
            "wgURI": "https://www.w3.org/webperf/",
            "license": "w3c-software-doc",
            "wgPublicList": "public-web-perf",
            "subjectPrefix": "[preload]",
            "format": "markdown",
            "testSuiteURI": "https://github.com/w3c/web-platform-tests/tree/master/preload",
            "otherLinks": [{
                "key": "Repository",
                "data": [{
                        "value": "We are on Github.",
                        "href": "https://github.com/w3c/preload/"
                    },
                    {
                        "value": "File a bug.",
                        "href": "https://github.com/w3c/preload/issues"
                    },
                    {
                        "value": "Commit history.",
                        "href": "https://github.com/w3c/preload/commits/gh-pages/index.html"
                    }
                ]
            }],
            "wgPatentURI": "https://www.w3.org/2004/01/pp-impl/45211/status",
            "publishISODate": "2017-06-30T00:00:00.000Z",
            "generatedSubtitle": "Editor's Draft 30 June 2017"
        }
    </script>
</head>

<body class="h-entry" id="respecDocument" aria-busy="false">
    <div class="head" role="contentinfo" id="respecHeader">
        <p>
            <a class="logo" href="https://www.w3.org/"><img width="72" height="48" src="https://www.w3.org/StyleSheets/TR/2016/logos/W3C" alt="W3C"></a>
        </p>
        <p></p>
        <h1 class="title p-name" id="title" property="dcterms:title">Preload</h1>
        <h2 id="w3c-editor-s-draft-30-june-2017"><abbr title="World Wide Web Consortium">W3C</abbr> Editor's Draft <time property="dcterms:issued" class="dt-published" datetime="2017-06-30">30 June 2017</time></h2>
        <dl>
            <dt>This version:</dt>
            <dd><a class="u-url" href="https://w3c.github.io/preload/">https://w3c.github.io/preload/</a></dd>
            <dt>Latest published version:</dt>
            <dd><a href="https://www.w3.org/TR/preload/">https://www.w3.org/TR/preload/</a></dd>
            <dt>Latest editor's draft:</dt>
            <dd><a href="https://w3c.github.io/preload/">https://w3c.github.io/preload/</a></dd>
            <dt>Test suite:</dt>
            <dd><a href="https://github.com/w3c/web-platform-tests/tree/master/preload">https://github.com/w3c/web-platform-tests/tree/master/preload</a></dd>
            <dt>Editors:</dt>
            <dd class="p-author h-card vcard" property="bibo:editor" resource="_:editor0" data-editor-id="56102"><span property="rdf:first" typeof="foaf:Person"><meta property="foaf:name" content="Ilya Grigorik"><a class="u-url url p-name fn" property="foaf:homepage" href="https://www.igvita.com/">Ilya Grigorik</a>, <a property="foaf:workplaceHomepage" class="p-org org h-org h-card" href="https://google.com/">Google</a>, <span class="ed_mailto"><a class="u-email email" property="foaf:mbox" href="mailto:igrigorik@gmail.com">igrigorik@gmail.com</a></span></span>
                <span property="rdf:rest" resource="_:editor1"></span>
            </dd>
            <dd class="p-author h-card vcard" resource="_:editor1" data-editor-id="58673"><span property="rdf:first" typeof="foaf:Person"><meta property="foaf:name" content="Yoav Weiss"><a class="u-url url p-name fn" property="foaf:homepage" href="https://blog.yoav.ws/">Yoav Weiss</a>, <a property="foaf:workplaceHomepage" class="p-org org h-org h-card" href="https://akamai.com/">Akamai</a>, <span class="ed_mailto"><a class="u-email email" property="foaf:mbox" href="mailto:yoav@yoav.ws">yoav@yoav.ws</a></span></span>
                <span property="rdf:rest" resource="rdf:nil"></span>
            </dd>

            <dt>Repository:</dt>
            <dd>
                <a href="https://github.com/w3c/preload/">
                      We are on Github.
                    </a>
            </dd>
            <dd>
                <a href="https://github.com/w3c/preload/issues">
                      File a bug.
                    </a>
            </dd>
            <dd>
                <a href="https://github.com/w3c/preload/commits/gh-pages/index.html">
                      Commit history.
                    </a>
            </dd>
        </dl>
        <p class="copyright">
            <a href="https://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a> © 2017

            <a href="https://www.w3.org/"><abbr title="World Wide Web Consortium">W3C</abbr></a><sup>®</sup> (<a href="https://www.csail.mit.edu/"><abbr title="Massachusetts Institute of Technology">MIT</abbr></a>,
            <a href="https://www.ercim.eu/"><abbr title="European Research Consortium for Informatics and Mathematics">ERCIM</abbr></a>,
            <a href="https://www.keio.ac.jp/">Keio</a>, <a href="http://ev.buaa.edu.cn/">Beihang</a>).
            <abbr title="World Wide Web Consortium">W3C</abbr> <a href="https://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">liability</a>,
            <a href="https://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">trademark</a> and
            <a rel="license" href="https://www.w3.org/Consortium/Legal/2015/copyright-software-and-document">permissive document license</a> rules apply.
        </p>
        <hr title="Separator for header">
    </div>
    <section id="abstract" class="introductory" property="dc:abstract">
        <h2 id="h-abstract" resource="#h-abstract"><span property="xhv:role" resource="xhv:heading">Abstract</span></h2>
        <p>This specification defines the <a href="#dfn-preload" class="internalDFN" data-link-type="dfn">preload</a> keyword that may be used with <a href="https://html.spec.whatwg.org/multipage/semantics.html#the-link-element">link</a> elements. This keyword
            provides a declarative fetch primitive that initiates an early fetch and separates fetching from resource execution.
        </p>
    </section>
    <p></p>
    <p></p>
    <section id="sotd" class="introductory">
        <h2 id="h-sotd" resource="#h-sotd"><span property="xhv:role" resource="xhv:heading">Status of This Document</span></h2>
        <p>
            <em>This section describes the status of this document at the time of its publication. Other documents may supersede this document. A list of current <abbr title="World Wide Web Consortium">W3C</abbr> publications and the latest revision of this technical report can be found in the <a href="https://www.w3.org/TR/"><abbr title="World Wide Web Consortium">W3C</abbr> technical reports index</a> at https://www.w3.org/TR/.</em>
        </p>
        <p>This is a <strong>work in progress</strong> and may change without any notices.
        </p>
        <p></p>
        <p></p>
        <p id="unstable"><strong class="redNote">Implementers <em class="rfc2119" title="SHOULD">SHOULD</em> be aware that
    this document is not stable.</strong> Implementers who are not taking part in the discussions are likely to find the specification changing out from under them in incompatible ways. Vendors interested in implementing this document before it eventually
            reaches the Candidate Recommendation stage <em class="rfc2119" title="SHOULD">SHOULD</em> join the mailing lists below and take part in the discussions.</p>
        <p>
            This document was published by the <a href="https://www.w3.org/webperf/">Web Performance Working Group</a> as an Editor's Draft. Comments regarding this document are welcome. Please send them to
            <a href="mailto:public-web-perf@w3.org?subject=%5Bpreload%5D">public-web-perf@w3.org</a> (<a href="mailto:public-web-perf-request@w3.org?subject=subscribe">subscribe</a>,
            <a href="https://lists.w3.org/Archives/Public/public-web-perf/">archives</a>) with <code>[preload]</code> at the start of your email's subject.
        </p>
        <p>
            Publication as an Editor's Draft does not imply endorsement by the <abbr title="World Wide Web Consortium">W3C</abbr> Membership. This is a draft document and may be updated, replaced or obsoleted by other documents at any time. It is inappropriate
            to cite this document as other than work in progress.
        </p>
        <p>
            This document was produced by a group operating under the
            <a id="sotd_patent" property="w3p:patentRules" href="https://www.w3.org/Consortium/Patent-Policy-20040205/">5 February 2004 <abbr title="World Wide Web Consortium">W3C</abbr> Patent
            Policy</a>.
            <abbr title="World Wide Web Consortium">W3C</abbr> maintains a <a href="https://www.w3.org/2004/01/pp-impl/45211/status" rel="disclosure">public list of any patent
              disclosures</a> made in connection with the deliverables of the group; that page also includes instructions for disclosing a patent. An individual who has actual knowledge of a patent which the individual believes contains
            <a href="https://www.w3.org/Consortium/Patent-Policy-20040205/#def-essential">Essential
            Claim(s)</a> must disclose the information in accordance with
            <a href="https://www.w3.org/Consortium/Patent-Policy-20040205/#sec-Disclosure">section
            6 of the <abbr title="World Wide Web Consortium">W3C</abbr> Patent Policy</a>.
        </p>
        <p>This document is governed by the <a id="w3c_process_revision" href="https://www.w3.org/2017/Process-20170301/">1 March 2017 <abbr title="World Wide Web Consortium">W3C</abbr> Process Document</a>.
        </p>


    </section>
    <nav id="toc">
        <h2 class="introductory" id="table-of-contents" resource="#table-of-contents"><span property="xhv:role" resource="xhv:heading">Table of Contents</span></h2>
        <ol class="toc" role="directory">
            <li class="tocline"><a href="#introduction" class="tocxref"><span class="secno">1. </span>Introduction</a></li>
            <li class="tocline"><a href="#link-type-preload" class="tocxref"><span class="secno">2. </span>Link type "<code>preload</code>"</a>
                <ol class="toc">
                    <li class="tocline"><a href="#processing" class="tocxref"><span class="secno">2.1 </span>Processing</a></li>
                    <li class="tocline"><a href="#link-element-extensions" class="tocxref"><span class="secno">2.2 </span><code>link</code> element extensions</a></li>
                    <li class="tocline"><a href="#server-push-http-2" class="tocxref"><span class="secno">2.3 </span>Server Push (HTTP/2)</a></li>
                </ol>
            </li>
            <li class="tocline"><a href="#conformance" class="tocxref"><span class="secno">3. </span>Conformance</a></li>
            <li class="tocline"><a href="#use-cases" class="tocxref"><span class="secno">A. </span>Use cases</a>
                <ol class="toc">
                    <li class="tocline"><a href="#early-fetch-of-critical-resources" class="tocxref"><span class="secno">A.1 </span>Early fetch of critical resources</a></li>
                    <li class="tocline"><a href="#early-fetch-and-application-defined-execution" class="tocxref"><span class="secno">A.2 </span>Early fetch and application defined execution</a></li>
                    <li class="tocline"><a href="#developer-server-and-proxy-initiated-fetching" class="tocxref"><span class="secno">A.3 </span>Developer, server, and proxy-initiated fetching</a></li>
                </ol>
            </li>
            <li class="tocline"><a href="#iana-considerations" class="tocxref"><span class="secno">B. </span>IANA Considerations</a></li>
            <li class="tocline"><a href="#privacy" class="tocxref"><span class="secno">C. </span>Privacy and Security</a></li>
            <li class="tocline"><a href="#acknowledgments" class="tocxref"><span class="secno">D. </span>Acknowledgments</a></li>
            <li class="tocline"><a href="#references" class="tocxref"><span class="secno">E. </span>References</a>
                <ol class="toc">
                    <li class="tocline"><a href="#normative-references" class="tocxref"><span class="secno">E.1 </span>Normative references</a></li>
                    <li class="tocline"><a href="#informative-references" class="tocxref"><span class="secno">E.2 </span>Informative references</a></li>
                </ol>
            </li>
        </ol>
    </nav>
    <p></p>
    <p></p>
    <section id="introduction" typeof="bibo:Chapter" resource="#introduction" property="bibo:hasPart">
        <!--OddPage-->
        <h2 id="h-introduction" resource="#h-introduction"><span property="xhv:role" resource="xhv:heading"><span class="secno">1. </span>Introduction</span>
        </h2>
        <p></p>
        <p></p>
        <p></p>
        <p></p>
        <p>Many applications require fine-grained control over when resources are fetched, processed, and applied to the document. For example, the loading and processing of some resources may be deferred by the application to reduce resource contention
            and improve performance of the initial load. This behavior is typically achieved by moving resource fetching into custom resource loading logic defined by the application - i.e. resource fetches are initiated via injected elements, or via
            <code>XMLHttpRequest</code>, when particular application conditions are met.</p>
        <p></p>
        <p></p>
        <p>However, there are also cases where some resources need to be fetched as early as possible, but their processing and execution logic is subject to application-specific requirements - e.g. dependency management, conditional loading, ordering guarantees,
            and so on. Currently, it is not possible to deliver this behavior without a performance penalty.</p>
        <p></p>
        <p></p>
        <ul>
            <p></p>
            <p></p>
            <li>Declaring a resource via one of the existing elements (e.g. <code>img</code>,
                <code>script</code>, <code>link</code>) couples resource fetching and execution. Whereas, an application may want to fetch, but delay execution of the resource until some condition is met.</li>
            <p></p>
            <p></p>
            <li>Fetching resources with <code>XMLHttpRequest</code> to avoid above behavior incurs a serious performance penalty by hiding resource declarations from the user agent's DOM and preload parsers. The resource fetches are only dispatched when the
                relevant JavaScript is executed, which due to abundance of blocking scripts on most pages introduces significant delays and affects application performance.</li>
        </ul>
        <p></p>
        <p></p>
        <p>The <a href="#dfn-preload" class="internalDFN" data-link-type="dfn">preload</a> keyword on <a href="https://html.spec.whatwg.org/multipage/semantics.html#the-link-element">link</a> elements provides a declarative fetch primitive that addresses
            the above use case of initiating an early fetch and separating fetching from resource execution. As such,
            <a href="#dfn-preload" class="internalDFN" data-link-type="dfn">preload</a> keyword serves as a low-level primitive that enables applications to build custom resource loading and execution behaviors without hiding resources from the user agent
            and incurring delayed resource fetching penalties.</p>
        <p></p>
        <p></p>
        <p>For example, the application can use the preload keyword to initiate early, high-priority, and non-render-blocking fetch of a CSS resource that can then be applied by the application at appropriate time:</p>
        <p></p>
        <p></p>
        <div class="example">
            <div class="example-title marker"><span>Example 1</span><span style="text-transform: none">: Using markup</span></div>
            <pre class="html hljs" aria-busy="false" aria-live="polite"><span class="hljs-comment">&lt;!-- preload stylesheet resource via declarative markup --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"preload"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"/styles/other.css"</span> <span class="hljs-attr">as</span>=<span class="hljs-string">"style"</span>&gt;</span>
<span class="hljs-comment">&lt;!-- or, preload stylesheet resource via JavaScript --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">var</span> res = <span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">"link"</span>);
res.rel = <span class="hljs-string">"preload"</span>;
res.as = <span class="hljs-string">"style"</span>;
res.href = <span class="hljs-string">"styles/other.css"</span>;
<span class="hljs-built_in">document</span>.head.appendChild(res);
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</pre>
        </div>
        <p></p>
        <p></p>
        <div class="example">
            <div class="example-title marker"><span>Example 2</span><span style="text-transform: none">: Using HTTP Header</span></div>
            <pre class="nolinks http hljs" aria-busy="false" aria-live="polite"><span class="hljs-attribute">Link</span>: &lt;https://example.com/other/styles.css&gt;; rel=preload; as=style</pre>
        </div>
        <p></p>
        <p></p>
        <p>As above examples illustrate, the resource can be specified via declarative markup, Link HTTP header ([<cite><a class="bibref" href="#bib-RFC5988">RFC5988</a></cite>]), or scheduled via JavaScript. See <a href="#use-cases">use cases</a> section
            for more hands-on examples of how and where <a href="#dfn-preload" class="internalDFN" data-link-type="dfn">preload</a> can be used.</p>
    </section>
    <p></p>
    <p></p>
    <section id="link-type-preload" typeof="bibo:Chapter" resource="#link-type-preload" property="bibo:hasPart">
        <!--OddPage-->
        <h2 id="h-link-type-preload" resource="#h-link-type-preload"><span property="xhv:role" resource="xhv:heading"><span class="secno">2. </span>Link type "<code>preload</code>"</span>
        </h2>
        <p></p>
        <p></p>
        <p></p>
        <p></p>
        <p></p>
        <p>The <dfn data-dfn-type="dfn" id="dfn-preload">preload</dfn> keyword may be used with <a href="https://html.spec.whatwg.org/multipage/semantics.html#the-link-element">link</a> elements. This keyword creates an <a href="https://html.spec.whatwg.org/multipage/semantics.html#external-resource-link">external resource link</a>            (
            <dfn data-dfn-type="dfn" id="dfn-preload-link">preload link</dfn>) that is used to declare a resource and its fetch properties. [<cite><a class="bibref" href="#bib-HTML">HTML</a></cite>]</p>
        <p></p>
        <p></p>
        <p></p>
        <p></p>
        <div class="note">
            <div class="note-title marker" aria-level="3" role="heading" id="h-note1"><span>Note</span><span style="text-transform: none">: feature detection</span></div>
            <p class="">If the preload keyword is used as an optimization to initiate earlier fetch then no additional feature detection checks are necessary: browsers that support preload will initiate earlier fetch, and those that do not will ignore it and fetch
                the resource as previously. Otherwise, if the application intends to rely on preload to fetch the resource, then it can <a href="https://gist.github.com/igrigorik/a02f2359f3bc50ca7a9c">execute a feature detection
check</a> to verify that it is supported.</p>
        </div>
        <p></p>
        <p></p>
        <p></p>
        <p></p>
        <div class="note">
            <div class="note-title marker" aria-level="3" role="heading" id="h-note2"><span>Note</span><span style="text-transform: none">: relationship to prefetch</span></div>
            <p class="">Both <code>prefetch</code> ([<cite><a class="bibref" href="#bib-RESOURCE-HINTS">RESOURCE-HINTS</a></cite>]) and <code>preload</code> declare a resource and its fetch properties, but differ in how and when the resource is fetched by the user
                agent: <code>prefetch</code> is an optional and low-priority fetch for a resource that might be used by a subsequent navigation; <code>preload</code> is a mandatory and high-priority fetch for a resource that is necessary for the current
                navigation. Developers should use each one accordingly to minimize resource contention and optimize load performance.</p>
        </div>
        <p></p>
        <p></p>
        <p></p>
        <section id="processing" typeof="bibo:Chapter" resource="#processing" property="bibo:hasPart">
            <h3 id="h-processing" resource="#h-processing"><span property="xhv:role" resource="xhv:heading"><span class="secno">2.1 </span>Processing</span>
            </h3>
            <p></p>
            <p></p>
            <p></p>
            <p></p>
            <p>The <dfn data-dfn-type="dfn" id="dfn-appropriate-times">appropriate times</dfn> to <a href="https://html.spec.whatwg.org/multipage/semantics.html#concept-link-obtain">obtain the resource</a> are:</p>
            <p></p>
            <p></p>
            <ul>
                <p></p>
                <p></p>
                <li>When the user agent that supports [<cite><a class="bibref" href="#bib-RFC5988">RFC5988</a></cite>] processes <code>Link</code> header that contains a <a href="#dfn-preload-link" class="internalDFN" data-link-type="dfn">preload link</a>.
                </li>
                <p></p>
                <p></p>
                <li>When the <a href="#dfn-preload-link" class="internalDFN" data-link-type="dfn">preload link</a>'s <a href="https://html.spec.whatwg.org/multipage/semantics.html#the-link-element">link</a> element is <a href="https://html.spec.whatwg.org/multipage/infrastructure.html#insert-an-element-into-a-document">inserted into a
document</a>.
                </li>
                <p></p>
                <p></p>
                <li>When the <a href="#dfn-preload-link" class="internalDFN" data-link-type="dfn">preload link</a> is created on a <a href="https://html.spec.whatwg.org/multipage/semantics.html#the-link-element">link</a> element that is already <a href="https://dom.spec.whatwg.org/#in-a-document-tree">in a document tree</a>.
                </li>
                <p></p>
                <p></p>
                <li>When the <code>href</code> attribute of the <a href="https://html.spec.whatwg.org/multipage/semantics.html#the-link-element">link</a> element of a <a href="#dfn-preload-link" class="internalDFN" data-link-type="dfn">preload
        link</a> that is already <a href="https://dom.spec.whatwg.org/#in-a-document-tree">in a document tree</a> is changed.
                </li>
                <p></p>
                <p></p>
                <li>When the <code>crossorigin</code> attribute of the <a href="https://html.spec.whatwg.org/multipage/semantics.html#the-link-element">link</a> element of a
                    <a href="#dfn-preload-link" class="internalDFN" data-link-type="dfn">preload link</a> that is already <a href="https://dom.spec.whatwg.org/#in-a-document-tree">in a document tree</a> is set, changed, or removed.
                </li>
                <p></p>
                <p></p>
                <li>When the <code>as</code> attribute of the <a href="https://html.spec.whatwg.org/multipage/semantics.html#the-link-element">link</a> element of a <a href="#dfn-preload-link" class="internalDFN" data-link-type="dfn">preload
        link</a> that is already <a href="https://dom.spec.whatwg.org/#in-a-document-tree">in a document tree</a> is set or changed to a value that does not or no longer matches the <a href="https://fetch.spec.whatwg.org/#concept-request-destination">request destination</a>                    of the previous obtained external resource, if any.
                </li>
                <p></p>
                <p></p>
                <li>When the <code>as</code> attribute of the <a href="https://html.spec.whatwg.org/multipage/semantics.html#the-link-element">link</a> element of a <a href="#dfn-preload-link" class="internalDFN" data-link-type="dfn">preload
        link</a> that is already <a href="https://dom.spec.whatwg.org/#in-a-document-tree">in a document tree</a> but was previously not obtained due to the <code>as</code> attribute specifying an unsupported <a href="https://fetch.spec.whatwg.org/#concept-request-destination">request
destination</a> is set, removed, or changed.
                </li>
                <p></p>
                <p></p>
                <li>When the <code>type</code> attribute of the <a href="https://html.spec.whatwg.org/multipage/semantics.html#the-link-element">link</a> element of a <a href="#dfn-preload-link" class="internalDFN" data-link-type="dfn">preload
        link</a> that is already <a href="https://dom.spec.whatwg.org/#in-a-document-tree">in a document tree</a> but was previously not obtained due to the <code>type</code> attribute not specifying a <a href="https://mimesniff.spec.whatwg.org/#parsable-mime-type">parsable MIME
type</a> or specifying an <a href="https://mimesniff.spec.whatwg.org/#supported-by-the-user-agent">unsupported MIME type</a> for the <a href="https://fetch.spec.whatwg.org/#concept-request-destination">request
destination</a> is set, removed, or changed.
                </li>
                <p></p>
                <p></p>
                <li>When the <code>media</code> attribute of the <a href="https://html.spec.whatwg.org/multipage/semantics.html#the-link-element">link</a> element of a <a href="#dfn-preload-link" class="internalDFN" data-link-type="dfn">preload
        link</a> that is already <a href="https://dom.spec.whatwg.org/#in-a-document-tree">in a document tree</a> but was not previously obtained due the <code>media</code> attribute's value being not a <a href="https://html.spec.whatwg.org/multipage/infrastructure.html#valid-media-query-list">valid media
query list</a> or one that does not <a href="https://html.spec.whatwg.org/multipage/infrastructure.html#matches-the-environment">match the environment</a> is set, removed, or changed.
                </li>
            </ul>
            <p></p>
            <p></p>
            <p>The user agent <em class="rfc2119" title="SHOULD">SHOULD</em> abort the current request if the <code>href</code> attribute of the <a href="https://html.spec.whatwg.org/multipage/semantics.html#the-link-element">link</a> element of a <a href="#dfn-preload-link"
                    class="internalDFN" data-link-type="dfn">preload link</a> is changed, removed, or its value is set to an empty string.</p>
            <p></p>
            <p></p>
            <p>At these times, the user agent must <a href="https://html.spec.whatwg.org/multipage/semantics.html#concept-link-obtain">obtain the resource</a> given by the link element.</p>
            <p></p>
            <p></p>
            <p>Obtaining the resource given by a <a href="#dfn-preload-link" class="internalDFN" data-link-type="dfn">preload link</a> element <em class="rfc2119" title="MUST NOT">MUST NOT</em>
                <a href="https://html.spec.whatwg.org/multipage/syntax.html#delay-the-load-event">delay the load event</a> of the element's <a href="https://dom.spec.whatwg.org/#concept-node-document">node document</a>.</p>
            <p></p>
            <p></p>
            <p>Once a <dfn data-dfn-type="dfn" id="dfn-preload-resource-has-been-obtained">preload resource has been obtained</dfn>, the user agent must add request to fetch group's response cache.</p>
            <p></p>
            <p></p>
            <div class="note">
                <div class="note-title marker" aria-level="4" role="heading" id="h-note3"><span>Note</span></div>
                <div class="">
                    <p>In addition to the HTTP cache, all browser implementations provide one or more levels of additional caches, which sometimes live before the HTTP cache (e.g. HTTP/2 server push responses are typically not committed to HTTP cache until
                        a client request is made), and after the HTTP cache (e.g. in-process memory caches). These caches are not defined today and need to be defined in Fetch API— see <a href="https://github.com/whatwg/fetch/issues/354">related
discussion</a>.</p>
                    <p></p>
                    <p></p>
                    <p>Conceptually, a preloaded response ought to be committed to the HTTP cache, as it is initiated by the client, and also be available in the memory cache and be re-usable at least once within the lifetime of a fetch group.</p>
                </div>
            </div>
            <p></p>
            <p></p>
            <p>The user agent <em class="rfc2119" title="MUST NOT">MUST NOT</em> automatically execute or apply the resource against the current page context.</p>
            <p></p>
            <p></p>
            <div class="note">
                <div class="note-title marker" aria-level="4" role="heading" id="h-note4"><span>Note</span></div>
                <p class="">For example, if a JavaScript resource is fetched via a
                    <a href="#dfn-preload-link" class="internalDFN" data-link-type="dfn">preload link</a> and the response contains a <code>no-cache</code> directive, the fetched response is retained by the user agent and is made immediately available
                    when fetched with a matching same navigation request at a later time - e.g. via a <code>script</code> tag or other means. This ensures that the user agent does not incur an unnecessary revalidation, or a duplicate download, between
                    the initial resource fetch initiated via the preload link and a later fetch requesting the same resource.</p>
            </div>
        </section>
        <p></p>
        <p></p>
        <section id="link-element-extensions" typeof="bibo:Chapter" resource="#link-element-extensions" property="bibo:hasPart">
            <h3 id="h-link-element-extensions" resource="#h-link-element-extensions"><span property="xhv:role" resource="xhv:heading"><span class="secno">2.2 </span><code>link</code> element extensions</span>
            </h3>
            <p></p>
            <p></p>
            <p></p>
            <p></p>
            <p></p>
            <p>[<cite><a class="bibref" href="#bib-HTML">HTML</a></cite>] defines the <code>as</code> content and IDL attributes. The state of the <code>as</code> content attribute is taken into account in the above processing model, which will set the
                <a
                    href="https://fetch.spec.whatwg.org/#concept-request-destination">request destination</a> as well as the corresponding <a href="https://fetch.spec.whatwg.org/#concept-request-type">request type</a> and <a href="https://fetch.spec.whatwg.org/#concept-request-initiator">request initiator</a>. This is necessary
                    to guarantee correct prioritization, request matching, application of the correct [<cite><a class="bibref" href="#bib-CSP3">CSP3</a></cite>] policy, and setting of the appropriate <code>Accept</code> request header.
            </p>
            <p></p>
            <p></p>
            <p></p>
            <p></p>
            <p>When the resource is declared via the <code>Link</code> header field ([<cite><a class="bibref" href="#bib-RFC5988">RFC5988</a></cite>]), the resource's <code>as</code> attribute is defined via the <code>as</code> link-extension target attribute.
                ([<cite><a class="bibref" href="#bib-RFC5988">RFC5988</a></cite>] section 5.4)</p>
            <p></p>
            <p></p>
            <p></p>
            <div class="example">
                <p></p>
                <p>Example directives to preload a resource that will be consumed by...
                </p>
                <p></p>
                <p></p>
                <p></p>
                <table>
                    <thead>
                        <tr>
                            <th>consumer</th>
                            <th>Preload directive</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><code>&lt;audio&gt;</code></td>
                            <td><code>&lt;link rel=preload as=audio href=...&gt;</code></td>
                        </tr>
                        <tr>
                        </tr>
                        <tr>
                            <td><code>&lt;video&gt;</code></td>
                            <td><code>&lt;link rel=preload as=video href=...&gt;</code></td>
                        </tr>
                        <tr>
                            <td><code>&lt;track&gt;</code></td>
                            <td><code>&lt;link rel=preload as=track href=...&gt;</code></td>
                        </tr>
                        <tr>
                            <td><code>&lt;script&gt;</code>, Worker's
                                <em>importScripts</em></td>
                            <td><code>&lt;link rel=preload as=script href=...&gt;</code></td>
                        </tr>
                        <tr>
                            <td>
                                <code>&lt;link rel=stylesheet&gt;</code>, CSS <a href="https://github.com/import" class="user-mention">@import</a>
                            </td>
                            <td><code>&lt;link rel=preload as=style href=...&gt;</code></td>
                        </tr>
                        <tr>
                            <td>
                                CSS <a href="https://github.com/font-face" class="user-mention">@font-face</a>
                            </td>
                            <td><code>&lt;link rel=preload as=font href=...&gt;</code></td>
                        </tr>
                        <tr>
                            <td><code>&lt;img&gt;</code>, <code>&lt;picture&gt;</code>, srcset, imageset</td>
                            <td><code>&lt;link rel=preload as=image href=...&gt;</code></td>
                        </tr>
                        <tr>
                            <td>SVG's <code>&lt;image&gt;</code>, CSS *-image</td>
                            <td><code>&lt;link rel=preload as=image href=...&gt;</code></td>
                        </tr>
                        <tr>
                            <td>XHR, fetch</td>
                            <td><code>&lt;link rel=preload as=fetch crossorigin href=...&gt;</code></td>
                        </tr>
                        <tr>
                            <td>Worker, SharedWorker</td>
                            <td><code>&lt;link rel=preload as=worker href=...&gt;</code></td>
                        </tr>
                        <tr>
                            <td><code>&lt;embed&gt;</code></td>
                            <td><code>&lt;link rel=preload as=embed href=...&gt;</code></td>
                        </tr>
                        <tr>
                            <td><code>&lt;object&gt;</code></td>
                            <td><code>&lt;link rel=preload as=object href=...&gt;</code></td>
                        </tr>
                        <tr>
                            <td><code>&lt;iframe&gt;</code>, <code>&lt;frame&gt;</code></td>
                            <td><code>&lt;link rel=preload as=document
              href=...&gt;</code></td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </section>
        <p></p>
        <p></p>
        <section id="server-push-http-2" typeof="bibo:Chapter" resource="#server-push-http-2" property="bibo:hasPart">
            <h3 id="h-server-push-http-2" resource="#h-server-push-http-2"><span property="xhv:role" resource="xhv:heading"><span class="secno">2.3 </span>Server Push (HTTP/2)</span>
            </h3>
            <p></p>
            <p></p>
            <p></p>
            <p></p>
            <p>HTTP/2 ([<cite><a class="bibref" href="#bib-RFC7540">RFC7540</a></cite>]) allows a server to pre-emptively send ("push") responses to the client. A pushed response is semantically equivalent to a server responding to a request and, similar
                to a preloaded response, is retained by the user agent and executed by the application when matched with a request initiated by the application. As such, from an application perspective, there is no difference between consuming a preload
                or a server push response.</p>
            <p></p>
            <p></p>
            <p>The server <em class="rfc2119" title="MAY">MAY</em> initiate server push for <a href="#dfn-preload-link" class="internalDFN" data-link-type="dfn">preload link</a> resources defined by the application for which it is <a href="https://httpwg.github.io/specs/rfc7540.html#authority">authoritative</a>.
                Initiating server push eliminates the request roundtrip between client and server for the declared <a href="#dfn-preload-link" class="internalDFN" data-link-type="dfn">preload link</a> resource. Optionally, if the use of server push is
                not desired for a resource declared via the <code>Link</code> header field ([<cite><a class="bibref" href="#bib-RFC5988">RFC5988</a></cite>]), the developer <em class="rfc2119" title="MAY">MAY</em> provide an opt-out signal to the server
                via the <code>nopush</code> target attribute ([<cite><a class="bibref" href="#bib-RFC5988">RFC5988</a></cite>] section 5.4). For example:
            </p>
            <p></p>
            <p></p>
            <div class="example">
                <div class="example-title marker"><span>Example 3</span></div>
                <pre class="nolinks http hljs" aria-busy="false" aria-live="polite"><span class="hljs-attribute">Link</span>: &lt;/app/style.css&gt;; rel=preload; as=style; nopush
<span class="hljs-attribute">Link</span>: &lt;/app/script.js&gt;; rel=preload; as=script</pre>
            </div>
            <p></p>
            <p></p>
            <div class="note">
                <div class="note-title marker" aria-level="4" role="heading" id="h-note5"><span>Note</span></div>
                <p class="">The above example indicates to an HTTP/2 push capable server that <code>/app/style.css</code> should not be pushed (e.g. the origin may have additional information indicating that it may already be in cache), while <code>/app/script.js</code>                    should be considered as a candidate for server push.
                </p>
            </div>
            <p></p>
            <p></p>
            <p>Initiating server push for a <a href="#dfn-preload-link" class="internalDFN" data-link-type="dfn">preload link</a> is an optional optimization. For example, the server might omit initiating push if it believes that the response is available
                in the client's cache: the client will process the preload directive, check the relevant caches, and initiate the request to the server if the resource is missing. Alternatively, the server might omit initiating push due to operational
                concerns, such as available server resources or other criteria. Finally, the use of server push is subject to negotiated HTTP/2 connection settings: the client may limit or outright disable the use of server push. Applications cannot rely
                on the availability and use of server push.
            </p>
        </section>
    </section>
    <p></p>
    <p></p>
    <section id="conformance" typeof="bibo:Chapter" resource="#conformance" property="bibo:hasPart">
        <!--OddPage-->
        <h2 id="h-conformance" resource="#h-conformance"><span property="xhv:role" resource="xhv:heading"><span class="secno">3. </span>Conformance</span>
        </h2>
        <p>
            As well as sections marked as non-normative, all authoring guidelines, diagrams, examples, and notes in this specification are non-normative. Everything else in this specification is normative.
        </p>
        <p id="respecRFC2119">The key words <em class="rfc2119">MAY</em>, <em class="rfc2119">MUST NOT</em>, and <em class="rfc2119">SHOULD</em> are to be interpreted as described in [<cite><a class="bibref" href="#bib-RFC2119">RFC2119</a></cite>].
        </p>
        <p>There is only one class of product that can claim conformance to this specification: a <dfn data-dfn-type="dfn" id="dfn-user-agent">user agent</dfn>.</p>
    </section>
    <p></p>
    <p></p>
    <section class="appendix informative" id="use-cases" typeof="bibo:Chapter" resource="#use-cases" property="bibo:hasPart">
        <!--OddPage-->
        <h2 id="h-use-cases" resource="#h-use-cases"><span property="xhv:role" resource="xhv:heading"><span class="secno">A. </span>Use cases</span>
        </h2>
        <p><em>This section is non-normative.</em></p>
        <p></p>
        <p></p>
        <p></p>
        <p></p>
        <section id="early-fetch-of-critical-resources" typeof="bibo:Chapter" resource="#early-fetch-of-critical-resources" property="bibo:hasPart">
            <h3 id="h-early-fetch-of-critical-resources" resource="#h-early-fetch-of-critical-resources"><span property="xhv:role" resource="xhv:heading"><span class="secno">A.1 </span>Early fetch of critical resources</span>
            </h3>
            <p></p>
            <p></p>
            <p></p>
            <p></p>
            <p>Preload parsers are used by most user agents to initiate early resource fetches while the main document parser is blocked due to a blocking script. However, the preload parsers do not execute JavaScript, and typically only perform a shallow
                parse of CSS, which means that the fetch of resources specified within JavaScript and CSS is delayed until the relevant document parser is able to process the resource declaration.
            </p>
            <p></p>
            <p></p>
            <p>In effect, most resources declarations specified within JavaScript and CSS are "hidden" from the speculative parsers and incur a performance penalty. To address this, the application can use a <a href="#dfn-preload-link" class="internalDFN"
                    data-link-type="dfn">preload link</a> to declaratively specify which resources the user agent must fetch early to improve page performance:</p>
            <p></p>
            <p></p>
            <div class="example">
                <div class="example-title marker"><span>Example 4</span><span style="text-transform: none">: Early fetch of critical resources</span></div>
                <pre class="nolinks html hljs" aria-busy="false" aria-live="polite"><span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"preload"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"/assets/font.woff2"</span> <span class="hljs-attr">as</span>=<span class="hljs-string">"font"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"font/woff2"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"preload"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"/style/other.css"</span> <span class="hljs-attr">as</span>=<span class="hljs-string">"style"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"preload"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"//example.com/resource"</span> <span class="hljs-attr">as</span>=<span class="hljs-string">"fetch"</span> <span class="hljs-attr">crossorigin</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"preload"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"https://fonts.example.com/font.woff2"</span> <span class="hljs-attr">as</span>=<span class="hljs-string">"font"</span> <span class="hljs-attr">crossorigin</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"font/woff2"</span>&gt;</span></pre>
            </div>
            <p></p>
            <p></p>
            <p>Above markup initiates four resource fetches: a font resource, a stylesheet, an unknown resource type from another origin, and a font resource from another origin. Each fetch is initialized with appropriate request headers and priority - the
                unknown type is equivalent to a fetch initiated <code>XMLHttpRequest</code> request. Further, these requests do not block the parser or the load event.</p>
            <p></p>
            <p></p>
            <div class="note">
                <div class="note-title marker" aria-level="4" role="heading" id="h-note6"><span>Note</span></div>
                <p class="">Preload links for CORS enabled resources, such as fonts or images with a <code>crossorigin</code> attribute, must also include a
                    <code>crossorigin</code> attribute, in order for the resource to be properly used.
                </p>
            </div>
        </section>
        <p></p>
        <p></p>
        <section id="early-fetch-and-application-defined-execution" typeof="bibo:Chapter" resource="#early-fetch-and-application-defined-execution" property="bibo:hasPart">
            <h3 id="h-early-fetch-and-application-defined-execution" resource="#h-early-fetch-and-application-defined-execution"><span property="xhv:role" resource="xhv:heading"><span class="secno">A.2 </span>Early fetch and application defined execution</span>
            </h3>
            <p></p>
            <p></p>
            <p></p>
            <p></p>
            <p>The <a href="#dfn-preload-link" class="internalDFN" data-link-type="dfn">preload link</a> can be used by the application to initiate early fetch of one or more resources, as well as to provide custom logic for when and how each response should
                be applied to the document. The application may:</p>
            <p></p>
            <p></p>
            <ul>
                <p></p>
                <p></p>
                <li>Decide to immediately apply each resource as it becomes available.
                </li>
                <p></p>
                <p></p>
                <li>Ensure that resources are applied in some application specific order.
                </li>
                <p></p>
                <p></p>
                <li>Apply resources conditionally based on arbitrary resource or application criteria.</li>
                <p></p>
                <p></p>
                <li>Defer resource application until some application condition is met.
                </li>
            </ul>
            <p></p>
            <p></p>
            <p>The <a href="#dfn-preload-link" class="internalDFN" data-link-type="dfn">preload link</a> provides a low-level and content-type agnostic primitive that enables applications to build custom resource loading and execution behaviors without incurring
                the penalty of delayed resource loading.
            </p>
            <p></p>
            <p></p>
            <p>For example, <a href="#dfn-preload-link" class="internalDFN" data-link-type="dfn">preload link</a> enables the application to provide
                <code>async</code> and <code>defer</code> like semantics, which are only available on <code>script</code> elements today, but for any content-type: applying the resource immediately after it is available provides <code>async</code> functionality,
                whereas adding some ordering logic enables <code>defer</code> functionality. Further, this behavior can be defined across a mix of content-types - the application is in full control over when and how each resource is applied.</p>
            <p></p>
            <p></p>
            <div class="example">
                <div class="example-title marker"><span>Example 5</span></div>
                <pre class="html hljs" aria-busy="false" aria-live="polite"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">preloadFinished</span>(<span class="hljs-params">e</span>) </span>{ ... }
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">preloadError</span>(<span class="hljs-params">e</span>)  </span>{ ... }
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-comment">&lt;!-- listen for load and error events --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"preload"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"app.js"</span> <span class="hljs-attr">as</span>=<span class="hljs-string">"script"</span> <span class="hljs-attr">onload</span>=<span class="hljs-string">"preloadFinished()"</span> <span class="hljs-attr">onerror</span>=<span class="hljs-string">"preloadError()"</span>&gt;</span></pre>
            </div>
            <p></p>
            <p></p>
            <p>By decoupling resource fetching from execution, the <a href="#dfn-preload-link" class="internalDFN" data-link-type="dfn">preload
      link</a> provides a future-proof primitive for building performant application specific resource loading strategies.</p>
        </section>
        <p></p>
        <p></p>
        <section id="developer-server-and-proxy-initiated-fetching" typeof="bibo:Chapter" resource="#developer-server-and-proxy-initiated-fetching" property="bibo:hasPart">
            <h3 id="h-developer-server-and-proxy-initiated-fetching" resource="#h-developer-server-and-proxy-initiated-fetching"><span property="xhv:role" resource="xhv:heading"><span class="secno">A.3 </span>Developer, server, and proxy-initiated fetching</span>
            </h3>
            <p></p>
            <p></p>
            <p></p>
            <p></p>
            <p></p>
            <p>The <a href="#dfn-preload-link" class="internalDFN" data-link-type="dfn">preload link</a> can be specified by the developer, or be automatically generated by the application server or an optimization proxy (e.g. a CDN).</p>
            <p></p>
            <p></p>
            <p></p>
            <p></p>
            <div class="example">
                <div class="example-title marker"><span>Example 6</span></div>
                <pre class="nolinks http hljs" aria-busy="false" aria-live="polite"><span class="hljs-attribute">Link</span>: &lt;https://example.com/font.woff2&gt;; rel=preload; as=font; type='font/woff2'
<span class="hljs-attribute">Link</span>: &lt;https://example.com/app/script.js&gt;; rel=preload; as=script
<span class="hljs-attribute">Link</span>: &lt;https://example.com/logo-hires.jpg&gt;; rel=preload; as=image
<span class="hljs-attribute">Link</span>: &lt;https://fonts.example.com/font.woff2&gt;; rel=preload; as=font; crossorigin; type='font/woff2'</pre>
            </div>
            <p></p>
            <p></p>
            <p></p>
            <p></p>
            <div class="example">
                <div class="example-title marker"><span>Example 7</span></div>
                <pre class="html hljs" aria-busy="false" aria-live="polite"><span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"preload"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"//example.com/widget.html"</span> <span class="hljs-attr">as</span>=<span class="hljs-string">"document"</span>&gt;</span></pre>
            </div>
            <p></p>
            <p></p>
            <p></p>
            <p></p>
            <div class="example">
                <div class="example-title marker"><span>Example 8</span></div>
                <pre class="html hljs" aria-busy="false" aria-live="polite"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">var</span> res = <span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">"link"</span>);
res.rel = <span class="hljs-string">"preload"</span>;
res.as = <span class="hljs-string">"document"</span>;
res.href = <span class="hljs-string">"/other/widget.html"</span>;
<span class="hljs-built_in">document</span>.head.appendChild(res);
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></pre>
            </div>
            <p></p>
            <p></p>
            <p></p>
            <ul>
                <p></p>
                <p></p>
                <li>The application can specify preload links, allowing:
                    <p></p>
                    <p></p>
                    <ul>
                        <p></p>
                        <p></p>
                        <li>The user agent to initiate early fetch of critical resources.
                        </li>
                        <p></p>
                        <p></p>
                        <li>The optimization proxy to fetch the critical resources and place them into its cache ahead of time, thus reducing or eliminating the latency of retrieving resources from origin.</li>
                    </ul>
                </li>
                <p></p>
                <p></p>
                <li>The optimization proxy can specify preload links on behalf of the application:
                    <p></p>
                    <p></p>
                    <ul>
                        <p></p>
                        <p></p>
                        <li>The proxy can observe and infer critical resources based on past request patterns, allowing it to automate generation of relevant preload links to improve page performance.</li>
                        <p></p>
                        <p></p>
                        <li>The proxy can deliver inferred preload links to the user agent while it is blocked on the response from the origin, allowing the user agent to begin early fetch of associated critical resources.
                            <p></p>
                            <p></p>
                            <ul>
                                <p></p>
                                <p></p>
                                <li>Many existing optimization proxies implement "early flush" strategies where references to associated critical resources are automatically delivered to the user agent while the proxy is blocked on the response from the origin.
                                    Today, this is typically done by creating a fake document <code>head</code> that contains
                                    <code>XMLHttpRequest</code>, <code>image</code>, and <code>object</code> requests for the associated critical resources. However, in practice, these implementations are brittle and often result in prioritization conflicts
                                    with requests initiated by speculative and document parsers, or worse, result in delayed or double downloads due to missing request context information. The <a href="#dfn-preload-link" class="internalDFN" data-link-type="dfn">preload link</a>                                    addresses these problems by providing a declarative fetch primitive, and interoperability with the HTTP Link header, that communicates both the URL and the context of the resource.
                                </li>
                            </ul>
                        </li>
                    </ul>
                </li>
            </ul>
        </section>
    </section>
    <p></p>
    <p></p>
    <section id="iana-considerations" typeof="bibo:Chapter" resource="#iana-considerations" property="bibo:hasPart">
        <!--OddPage-->
        <h2 id="h-iana-considerations" resource="#h-iana-considerations"><span property="xhv:role" resource="xhv:heading"><span class="secno">B. </span>IANA Considerations</span>
        </h2>
        <p></p>
        <p></p>
        <p></p>
        <p></p>
        <p></p>
        <p>The link relation type below has been registered by IANA per Section 6.2.1 of [<cite><a class="bibref" href="#bib-RFC5988">RFC5988</a></cite>]:</p>
        <p></p>
        <p></p>
        <p></p>
        <dl>
            <p></p>
            <p></p><dt>Relation Name:</dt>
            <p></p>
            <p></p>
            <dd>preload</dd>
            <p></p>
            <p></p><dt>Description:</dt>
            <p></p>
            <p></p>
            <dd>Refers to a resource that should be loaded early in the processing of the link's context, without blocking rendering.</dd>
            <p></p>
            <p></p><dt>Reference:</dt>
            <p></p>
            <p></p>
            <dd>
                <a href="https://www.w3.org/TR/preload/"><abbr title="World Wide Web Consortium">W3C</abbr> Preload Specification
        (https://www.w3.org/TR/preload/)</a>
            </dd>
            <p></p>
            <p></p><dt>Note:</dt>
            <p></p>
            <p></p>
            <dd>Additional target attributes establish the detailed fetch properties of the link.</dd>
        </dl>
    </section>
    <p></p>
    <p></p>
    <section id="privacy" class="informative" typeof="bibo:Chapter" resource="#privacy" property="bibo:hasPart">
        <!--OddPage-->
        <h2 id="h-privacy" resource="#h-privacy"><span property="xhv:role" resource="xhv:heading"><span class="secno">C. </span>Privacy and Security</span>
        </h2>
        <p><em>This section is non-normative.</em></p>
        <p></p>
        <p></p>
        <p></p>
        <p></p>
        <p>Preload is a declarative fetch primitive that initiates early fetch of resources and separates fetching from resource execution. In effect, it is conceptually similar to initiating a scripted fetch for a resource, but with additional constraints
            and benefits:</p>
        <p></p>
        <p></p>
        <ul>
            <p></p>
            <p></p>
            <li>The resource declaration is visible via HTTP headers or HTML markup, which allows the user agent to initiate the fetch earlier, and without blocking on JavaScript execution.</li>
            <p></p>
            <p></p>
            <li>The response is not executed and there is no callback to retrieve its payload. The response is retrieved and executed by initiating another fetch (via script, DOM element, etc) that matches the preloaded response.
            </li>
            <p></p>
            <p></p>
            <li>The developer can specify the target context that will consume the response via <code>as</code> attribute, which allows the user agent to enforce the relevant CSP policies when initiating the preload fetch. If <code>as</code> is omitted, preload
                defaults to same security and privacy processing as a call to <code>fetch()</code> - i.e. subject to <code>connect-src</code>.</li>
        </ul>
        <p></p>
        <p></p>
        <p>The site authors are encouraged to take the necessary precautions and specify the relevant [<cite><a class="bibref" href="#bib-CSP3">CSP3</a></cite>], [<cite><a class="bibref" href="#bib-MIXED-CONTENT">MIXED-CONTENT</a></cite>], and [<cite><a class="bibref" href="#bib-REFERRER-POLICY">REFERRER-POLICY</a></cite>]
            rules, such that the browser can enforce them when initiating the preload request. Additionally, if preload directives are provided via the <code>Link</code> HTTP response header, then the relevant policies should also be delivered as an HTTP
            response header - e.g. see <a href="https://w3c.github.io/webappsec/specs/content-security-policy/#complications">
    Processing Complications</a> for CSP.</p>
    </section>
    <p></p>
    <p></p>
    <section class="appendix informative" id="acknowledgments" typeof="bibo:Chapter" resource="#acknowledgments" property="bibo:hasPart">
        <!--OddPage-->
        <h2 id="h-acknowledgments" resource="#h-acknowledgments"><span property="xhv:role" resource="xhv:heading"><span class="secno">D. </span>Acknowledgments</span>
        </h2>
        <p><em>This section is non-normative.</em></p>
        <p></p>
        <p></p>
        <p></p>
        <p></p>
        <p>This document reuses text from the [<cite><a class="bibref" href="#bib-HTML">HTML</a></cite>] specification, edited by Ian Hickson, as permitted by the license of that specification.</p>
    </section>
    <p></p>
    <section id="references" class="appendix" typeof="bibo:Chapter" resource="#references" property="bibo:hasPart">
        <!--OddPage-->
        <h2 id="h-references" resource="#h-references"><span property="xhv:role" resource="xhv:heading"><span class="secno">E. </span>References</span>
        </h2>
        <section id="normative-references" typeof="bibo:Chapter" resource="#normative-references" property="bibo:hasPart">
            <h3 id="h-normative-references" resource="#h-normative-references"><span property="xhv:role" resource="xhv:heading"><span class="secno">E.1 </span>Normative references</span>
            </h3>
            <dl class="bibliography" resource=""><dt id="bib-CSP3">[CSP3]</dt>
                <dd><a href="https://www.w3.org/TR/CSP3/" property="dc:requires"><cite>Content Security Policy Level 3</cite></a>. Mike West. W3C. 13 September 2016. W3C Working Draft. URL: <a href="https://www.w3.org/TR/CSP3/" property="dc:requires">https://www.w3.org/TR/CSP3/</a>
                </dd><dt id="bib-HTML">[HTML]</dt>
                <dd><a href="https://html.spec.whatwg.org/multipage/" property="dc:requires"><cite>HTML Standard</cite></a>. Anne van Kesteren; Domenic Denicola; Ian Hickson; Philip Jägenstedt; Simon Pieters. WHATWG. Living Standard. URL: <a href="https://html.spec.whatwg.org/multipage/"
                        property="dc:requires">https://html.spec.whatwg.org/multipage/</a>
                </dd><dt id="bib-MIXED-CONTENT">[MIXED-CONTENT]</dt>
                <dd><a href="https://www.w3.org/TR/mixed-content/" property="dc:requires"><cite>Mixed Content</cite></a>. Mike West. W3C. 2 August 2016. W3C Candidate Recommendation. URL: <a href="https://www.w3.org/TR/mixed-content/" property="dc:requires">https://www.w3.org/TR/mixed-content/</a>
                </dd><dt id="bib-REFERRER-POLICY">[REFERRER-POLICY]</dt>
                <dd><a href="https://www.w3.org/TR/referrer-policy/" property="dc:requires"><cite>Referrer Policy</cite></a>. Jochen Eisinger; Emily Stark. W3C. 26 January 2017. W3C Candidate Recommendation. URL: <a href="https://www.w3.org/TR/referrer-policy/"
                        property="dc:requires">https://www.w3.org/TR/referrer-policy/</a>
                </dd><dt id="bib-RFC2119">[RFC2119]</dt>
                <dd><a href="https://tools.ietf.org/html/rfc2119" property="dc:requires"><cite>Key words for use in RFCs to Indicate Requirement Levels</cite></a>. S. Bradner. IETF. March 1997. Best Current Practice. URL: <a href="https://tools.ietf.org/html/rfc2119"
                        property="dc:requires">https://tools.ietf.org/html/rfc2119</a>
                </dd><dt id="bib-RFC5988">[RFC5988]</dt>
                <dd><a href="https://tools.ietf.org/html/rfc5988" property="dc:requires"><cite>Web Linking</cite></a>. M. Nottingham. IETF. October 2010. Proposed Standard. URL: <a href="https://tools.ietf.org/html/rfc5988" property="dc:requires">https://tools.ietf.org/html/rfc5988</a>
                </dd><dt id="bib-RFC7540">[RFC7540]</dt>
                <dd><a href="https://tools.ietf.org/html/rfc7540" property="dc:requires"><cite>Hypertext Transfer Protocol Version 2 (HTTP/2)</cite></a>. M. Belshe; R. Peon; M. Thomson, Ed.. IETF. May 2015. Proposed Standard. URL: <a href="https://tools.ietf.org/html/rfc7540"
                        property="dc:requires">https://tools.ietf.org/html/rfc7540</a>
                </dd>
            </dl>
        </section>
        <section id="informative-references" typeof="bibo:Chapter" resource="#informative-references" property="bibo:hasPart">
            <h3 id="h-informative-references" resource="#h-informative-references"><span property="xhv:role" resource="xhv:heading"><span class="secno">E.2 </span>Informative references</span>
            </h3>
            <dl class="bibliography" resource=""><dt id="bib-RESOURCE-HINTS">[RESOURCE-HINTS]</dt>
                <dd><a href="https://www.w3.org/TR/resource-hints/" property="dc:references"><cite>Resource Hints</cite></a>. Ilya Grigorik. W3C. 4 May 2017. W3C Working Draft. URL: <a href="https://www.w3.org/TR/resource-hints/" property="dc:references">https://www.w3.org/TR/resource-hints/</a>
                </dd>
            </dl>
        </section>
    </section>
    <p role="navigation" id="back-to-top"><a href="#toc"><abbr title="Back to Top">↑</abbr></a></p>
    <script src="https://www.w3.org/scripts/TR/2016/fixup.js"></script>
</body>

</html>